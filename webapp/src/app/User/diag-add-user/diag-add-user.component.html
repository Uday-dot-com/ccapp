<mat-card-title>Add New User</mat-card-title>
<mat-card-content>
  <form>
    <mat-form-field class="example-full-width">
      <input
        matInput
        placeholder="Email"
        [(ngModel)]="userModel.email"
        type="email"
        [formControl]="emailFormControl"
        required
      />
      <mat-error *ngIf="emailFormControl.hasError('pattern')">
        Please enter a valid email
      </mat-error>
      <mat-error *ngIf="emailFormControl.hasError('required')">
         Email is required
      </mat-error>
    </mat-form-field>
    <mat-form-field class="example-full-width">
      <input
        [(ngModel)]="userModel.name"
        matInput
        placeholder="Name"
        type="text"
        name="name"
        maxlength="25"
        required
      />
    </mat-form-field>
    <mat-form-field class="example-full-width">
      <input
        [(ngModel)]="userModel.password"
        matInput
        placeholder="Password"
        type="password"
        [formControl]="validPassword"
        name="password"
        required
      />
      <mat-error *ngIf="validPassword.hasError('required')">
        Password is required
      </mat-error>
      <mat-error *ngIf="validPassword.hasError('minLength')">
        Invalid password. Password must be <strong>8 to 25</strong> characters
        long
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Role</mat-label>
      <mat-select [(value)]="selected" [(ngModel)]="userModel.role" name="role">
        <mat-option value="admin">Admin</mat-option>
        <mat-option value="user">User</mat-option>
      </mat-select>
    </mat-form-field>
  </form>
</mat-card-content>
<mat-card-actions>
  <button mat-raised-button mat-dialog-close class="btn btn-danger pull-right">
    Cancel
  </button>
  <button
    mat-raised-button
    [mat-dialog-close]="true"
    [disabled]="
      !userModel.email ||
      !userModel.name ||
      !userModel.password ||
      !userModel.role ||
      !emailFormControl.valid ||
      !validPassword.valid
    "
    type="submit"
    (click)="addUser() && getUser()"
    class="btn btn-danger pull-left"
  >
    Save
  </button>
</mat-card-actions>
